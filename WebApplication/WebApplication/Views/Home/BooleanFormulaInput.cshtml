
@{
    ViewBag.Title = "Ввод булевых формул";
}

<div class="well-color">
    <div class="tab-content">
        <div class="tab-pane active" id="online">
            <h4 id="instruction" class="">Инструкция.</h4>
            При вводе с клавиатуры используйте следующие обозначения:
            <table class="table">
                <tbody>
                    <tr><th>Клавиша</th><th>Оператор</th><th></th></tr>
                    <tr><td>!</td><td>¬</td><td class="tal">Отрицание (НЕ)</td></tr>
                    <tr><td>|</td><td>|</td><td class="tal">Штрих Шеффера (И-НЕ)</td></tr>
                    <tr><td>#</td><td>↓</td><td class="tal">Стрелка Пирса (ИЛИ-НЕ)</td></tr>
                    <tr><td>*</td><td>&amp;</td><td class="tal">Конъюнкция (И)</td></tr>
                    <tr><td>+</td><td>v</td><td class="tal">Дизъюнкция (ИЛИ)</td></tr>
                    <tr><td>^</td><td>®</td><td class="tal">Исключающее ИЛИ, сумма по модулю 2 (XOR)</td></tr>
                    <tr><td>~</td><td>→</td><td class="tal">Импликация (ЕСЛИ-ТО)</td></tr>
                    <tr><td>%</td><td>←</td><td class="tal">Обратная импликация</td></tr>
                    <tr><td>=</td><td>≡</td><td class="tal">Эквивалентность (РАВНО)</td></tr>
                </tbody>
            </table>
            
            <span class="instruction">Логическое выражение</span>:
            <input type="text" name="fx" size="40" required="" placeholder="x+y&amp;z" id="result">
            <br />
            <br><input type="checkbox" name="f1" value="1"> Вывод промежуточных таблиц для таблицы истинности
            <br><input type="checkbox" name="f2" value="1"> Построение СКНФ
            <br><input type="checkbox" name="f3" value="1"> Построение СДНФ
            <br><input type="checkbox" name="f4" value="1"> Построение полинома Жегалкина
            <br><input type="checkbox" name="f5" value="1"> Построение карты Вейча-Карно
            <br />
            <br />

        </div>
    </div>
</div>

<div class="center">

    <button id="generate" name="STEP2" class="btn btn-lg btn-primary">Решить</button>
    <div class="latex_formula_image" style="padding: 20px; margin: 20px; border: 1px solid;">
    </div>
</div>



@section scripts{

    <script type="text/javascript">

        // Генерируем запрос и ждём результат
        $('#generate')
            .click(function(e) {
                var generated = document.getElementById('result').value;

                $.ajax({
                    type: 'GET',
                    data: {
                        'formula': generated.toString().trim()
                    },

                    url: '@Url.Action("BooleanFormulaInput")',

                    success: function(result) {
                        console.log({ o: result });
                        $('.latex_formula_image').html('<img src="data:image/jpeg;base64,' + result + '" />');
                    },
                    error: function(xhr, message, p3) {
                        alert(message);
                    }
                });

            });


    </script>
}